import{j as e}from"./jsx-runtime.ChRk8yaC.js";import{r as x}from"./index.BoiMzueB.js";import{r as h}from"./ruleSettings.DzgjoZSs.js";function b(i){return i.filter(r=>!h.getSyncWithStorage(r.code).enabled)}function w(i,r){const s=new Date().toISOString(),l=b(i),a=typeof window<"u"?window.location.origin+window.location.pathname:"https://zaki3mymy.github.io/RuffMate/";if(l.length===0)return`[tool.ruff.lint]
# Generated by RuffMate at ${s}
# ${a}
# Ruff version: ${r}
select = ["ALL"]
# All rules are enabled (no rules disabled in RuffMate)
`;const u=[...l].sort((t,c)=>t.code.localeCompare(c.code));let n=`[tool.ruff.lint]
# Generated by RuffMate at ${s}
# ${a}
# Ruff version: ${r}
select = ["ALL"]
ignore = [
`;return u.forEach((t,c)=>{const p=c===u.length-1,m=h.getSyncWithStorage(t.code),f=m.comment?`  # ${m.comment}`:"";n+=`    "${t.code}",${f}${p?"":`
`}`}),n+=`
]
`,n}function k({rules:i,ruffVersion:r}){const[s,l]=x.useState(!1),[a,u]=x.useState(""),[n,t]=x.useState("idle"),c=()=>{const o=w(i,r);u(o),l(!0),t("idle")};x.useEffect(()=>{const o=g=>{g.key==="Escape"&&s&&l(!1)};return s&&document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}},[s]);const p=async()=>{try{await navigator.clipboard.writeText(a),t("copied"),setTimeout(()=>t("idle"),2e3)}catch(o){console.error("Failed to copy:",o),t("error"),setTimeout(()=>t("idle"),2e3)}},m=()=>{const o=new Blob([a],{type:"text/plain"}),g=URL.createObjectURL(o),d=document.createElement("a");d.href=g,d.download="pyproject.toml",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(g)},f=()=>{l(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:c,className:"flex w-full items-center justify-center gap-2 rounded-lg bg-blue-600 px-6 py-2.5 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 md:w-auto","aria-label":"設定をエクスポート",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"エクスポート"]}),s&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:f,children:e.jsxs("div",{className:"mx-4 max-h-[80vh] w-full max-w-3xl overflow-hidden rounded-lg bg-white shadow-xl md:mx-0",onClick:o=>o.stopPropagation(),children:[e.jsx("div",{className:"border-b border-gray-200 bg-gray-50 px-4 py-3 sm:px-6 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 sm:text-xl",children:"pyproject.toml プレビュー"}),e.jsx("button",{onClick:f,className:"rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600","aria-label":"閉じる",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"overflow-y-auto p-4 sm:p-6",children:e.jsx("pre",{className:"overflow-x-auto rounded-lg bg-gray-900 p-3 text-xs text-gray-100 sm:p-4 sm:text-sm",children:e.jsx("code",{children:a})})}),e.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-3 sm:px-6 sm:py-4",children:e.jsxs("div",{className:"flex flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:justify-end sm:gap-3",children:[e.jsx("button",{onClick:p,className:`w-full rounded-lg px-4 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 sm:w-auto ${n==="copied"?"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500":n==="error"?"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500":"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500"}`,children:n==="copied"?"コピーしました":n==="error"?"コピー失敗":"クリップボードにコピー"}),e.jsx("button",{onClick:m,className:"w-full rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:w-auto",children:"ファイルをダウンロード"})]})})]})})]})}export{k as default};

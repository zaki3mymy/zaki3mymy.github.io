import{j as e}from"./jsx-runtime.ChRk8yaC.js";import{r as s}from"./index.BoiMzueB.js";import{f as g}from"./filterState.D-a6X9tp.js";const C=[{value:"stable",label:"Stable"},{value:"preview",label:"Preview"},{value:"deprecated",label:"Deprecated"},{value:"removed",label:"Removed"}];function k({categories:f}){const[a,h]=s.useState([]),[r,x]=s.useState([]),[n,m]=s.useState(!1),[d,p]=s.useState(!1),[o,w]=s.useState(!0),i=s.useRef(null),c=s.useRef(null);s.useEffect(()=>{const l=t=>{i.current&&!i.current.contains(t.target)&&m(!1),c.current&&!c.current.contains(t.target)&&p(!1)};return(n||d)&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[n,d]);const b=l=>{const t=a.includes(l)?a.filter(u=>u!==l):[...a,l];h(t),g.setCategories(t)},v=l=>{const t=r.includes(l)?r.filter(u=>u!==l):[...r,l];x(t),g.setStatuses(t)},j=()=>{h([]),x([]),g.clearCategoriesAndStatuses()},y=a.length>0||r.length>0;return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>w(!o),className:"flex w-full items-center justify-between border-t border-gray-200 bg-gray-50 px-4 py-3 text-sm font-medium text-gray-700 hover:bg-gray-100 md:hidden","aria-expanded":!o,children:[e.jsx("span",{children:"フィルタ"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform ${o?"":"rotate-180"}`,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),e.jsx("div",{className:`bg-gray-50 p-4 ${o?"hidden md:block md:border-t md:border-gray-200":"block border-t border-gray-200"}`,children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-4",children:[e.jsxs("div",{className:"relative w-full md:w-auto",ref:i,children:[e.jsxs("button",{onClick:()=>m(!n),className:"flex w-full items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 md:w-auto","aria-expanded":n,"aria-haspopup":"true",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),"カテゴリ",a.length>0&&e.jsx("span",{className:"ml-1 rounded-full bg-blue-600 px-2 py-0.5 text-xs text-white",children:a.length})]}),n&&e.jsx("div",{className:"absolute left-0 top-full z-20 mt-2 max-h-80 w-full overflow-y-auto rounded-lg border border-gray-200 bg-white shadow-lg md:w-64",children:e.jsx("div",{className:"p-2",children:f.map(l=>e.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded px-3 py-2 hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:a.includes(l),onChange:()=>b(l),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:l})]},l))})})]}),e.jsxs("div",{className:"relative w-full md:w-auto",ref:c,children:[e.jsxs("button",{onClick:()=>p(!d),className:"flex w-full items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 md:w-auto","aria-expanded":d,"aria-haspopup":"true",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),"ステータス",r.length>0&&e.jsx("span",{className:"ml-1 rounded-full bg-blue-600 px-2 py-0.5 text-xs text-white",children:r.length})]}),d&&e.jsx("div",{className:"absolute left-0 top-full z-20 mt-2 w-full rounded-lg border border-gray-200 bg-white shadow-lg md:w-48",children:e.jsx("div",{className:"p-2",children:C.map(l=>e.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded px-3 py-2 hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:r.includes(l.value),onChange:()=>v(l.value),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:l.label})]},l.value))})})]}),y&&e.jsx("button",{onClick:j,className:"rounded-lg bg-gray-600 p-2 text-white hover:bg-gray-700","aria-label":"フィルタをクリア",title:"フィルタをクリア",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})]})}export{k as default};

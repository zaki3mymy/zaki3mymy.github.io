import{j as e}from"./jsx-runtime.ChRk8yaC.js";import{r as n}from"./index.BoiMzueB.js";import{r as c}from"./ruleSettings.DzgjoZSs.js";function f(){const[r,l]=n.useState(!1),[s,a]=n.useState("idle");n.useEffect(()=>{const t=d=>{d.key==="Escape"&&r&&s==="idle"&&l(!1)};return r&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[r,s]);const i=()=>{a("resetting");try{c.clearAll(),a("success"),window.dispatchEvent(new CustomEvent("settings-reset",{detail:{timestamp:Date.now()}})),setTimeout(()=>{l(!1),a("idle")},1500)}catch(t){console.error("Reset failed:",t),a("idle")}},o=()=>{l(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>l(!0),className:"flex w-full items-center justify-center gap-2 rounded-lg bg-red-600 px-6 py-2.5 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 md:w-auto","aria-label":"設定をリセット",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"リセット"]}),r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:s==="idle"?o:void 0,children:e.jsxs("div",{className:"mx-4 max-h-[80vh] w-full max-w-md overflow-hidden rounded-lg bg-white shadow-xl md:mx-0",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"border-b border-gray-200 bg-gray-50 px-4 py-3 sm:px-6 sm:py-4",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 sm:text-xl",children:"設定をリセット"})}),e.jsx("div",{className:"p-4 sm:p-6",children:s==="resetting"?e.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-gray-200 border-t-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"リセット中..."})]}):s==="success"?e.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("p",{className:"text-sm text-gray-600",children:"リセットしました"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-700",children:"本当に全ての設定をリセットしますか？この操作は元に戻せません。"}),e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:e.jsx("p",{className:"text-xs text-red-700",children:"ルールの有効/無効、コメントなど全ての設定が初期状態に戻ります。"})})]})}),s==="idle"&&e.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-3 sm:px-6 sm:py-4",children:e.jsxs("div",{className:"flex flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:justify-end sm:gap-3",children:[e.jsx("button",{onClick:o,className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 sm:w-auto",children:"キャンセル"}),e.jsx("button",{onClick:i,className:"w-full rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:w-auto",children:"リセット"})]})})]})})]})}export{f as default};
